<div class="panel-body">
  <%= form_for @vehicle, :url => "/dealer/vehicles", :method => "POST" do |f| %>

    <% if @vehicle.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@vehicle.errors.count, "error") %> prohibited this category from being saved:</h2>

        <ul>
          <% @vehicle.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="row">
      <div class="col-sm-12">
        <div class="form-group">
          <b>Car Detail Form</b>
        </div>
      </div>
    </div>
    <hr/>

    <div class="row">
      <div class="col-sm-6">

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Manufacturer</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= select_tag :manufacturer_id, options_for_select([["- Select -", ""]] + @manufacturers.map {|m| [m.name, m.id]}), :class => "form-control", :id => "manufacturer_id", :onchange => "load_carmodels(this.value)" %>
            </div>
          </div>
        </div>

        <div id="load_carmodels">
          <%= render :partial => "admin/vehicles/load_carmodels" %>
        </div>

        <div id="load_varients">
          <%= render :partial => "admin/vehicles/load_varients" %>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Car Image</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.file_field :image %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Location</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.select :location, options_for_select([["Select", ""],["Bangalore","bangalore"],["Delhi","gurgaon"]], :selected => f.object.location), {}, :class => "form-control", :rows => "1" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Body style</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.select :body_style, options_for_select([["-- Select body type", ""], ["Hatchback", "Hatchback"], ["Convertible", "Convertible"], ["MUV_VAN", "MUV_VAN"],["Seden", "Seden"], ["SUV", "SUV"]]), {}, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Exterior Color</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.text_field :exterior_color, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Reg. Year</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.text_field :reg_year, :class => "form-control" %>
            </div>
          </div>
        </div>


        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Manufactured Year</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.text_field :manufactured_year, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Mileage</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.text_field :milage, :class => "form-control" %>
            </div>
          </div>
        </div>

      </div>

      <div class="col-sm-6">
        <div class="row">
            <div class="col-sm-3">
              <div class="form-group">
                <b>Fuel type</b>
              </div>
            </div>

            <div class="col-sm-6">
              <div class="form-group">
                <%= f.select :fuel_type, options_for_select([["Select",""],["Petrol","Petrol"],["Diesel","Diesel"],["CNG","CNG"],["LPG","LPG"],["Hybrid","Hybrid"]],:selected => f.object.fuel_type), {}, :class => "form-control" %>
              </div>
            </div>
          </div>
        
        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Engine Type</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.text_field :engine_type, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Transmission</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.select :transmission, options_for_select([["Select", ""], ["Manual", "Manual"], ["Automatic", "Automatic"]]), {}, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Registration State</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.text_field :registration_state, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Registration No.</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.text_field :registration_no, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Sell Price</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.text_field :sell_price, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Music System</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.select :sterio, options_for_select([["-Select-", ""],["Yes","Yes"],["No","No"]], :selected => f.object.sterio),{}, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <b>Seat Covers</b>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="form-group">
              <%= f.select :seat_covers,  options_for_select([["-Select-", ""],["Fabric","Fabric"],["Leather","Leather"],["Faux leather","Faux leather"]],:selected => f.object.seat_covers),{}, :class => "form-control" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-3">
            <div class="form-group">
              <%= f.submit "Save", :class => "btn btn-md btn-warning", :id => "save_vehicle" %>
            </div>
          </div>
        </div>

      </div>
    <% end %> 
  </div>

  <script>
    $(document).on("click", "#save_vehicle", function() {
      var make_id = $("#manufacturer_id").val();
      if (make_id === '') {
        alert("Please Select Manufacturer to Proceed.");
        return false;
      }
    });
    
    function load_carmodels(obj) {
      $.ajax({
        url: "/admin/vehicles/load_car_model",
        type: "GET",
        dataType: "Script",
        data: {
          manufacturer_id: obj
        }
      });
    }

    function load_varients(car_model_id) {
      $.ajax({
        url: "/admin/vehicles/load_varients",
        dataType: "Script",
        type: "GET",
        data: {
          car_model_id: car_model_id
        }
      });
    }
  </script>